(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7789],{18486:function(e,t,a){Promise.resolve().then(a.bind(a,35765))},35765:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return R}});var n=a(57437),i=a(2265),s=a(24033),l=a(67972),r=a(25750),o=a(62442);let c=e=>"number"==typeof e&&!isNaN(e),d=e=>"string"==typeof e,u=e=>"function"==typeof e,m=e=>(0,i.isValidElement)(e)||d(e)||u(e)||c(e);function p(e){let{enter:t,exit:a,appendPosition:n=!1,collapse:s=!0,collapseDuration:l=300}=e;return function(e){let{children:r,position:o,preventExitTransition:c,done:d,nodeRef:u,isIn:m,playToast:p}=e,g=n?`${t}--${o}`:t,x=n?`${a}--${o}`:a,f=(0,i.useRef)(0);return(0,i.useLayoutEffect)(()=>{let e=u.current,t=g.split(" "),a=n=>{n.target===u.current&&(p(),e.removeEventListener("animationend",a),e.removeEventListener("animationcancel",a),0===f.current&&"animationcancel"!==n.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",a),e.addEventListener("animationcancel",a)},[]),(0,i.useEffect)(()=>{let e=u.current,t=()=>{e.removeEventListener("animationend",t),s?function(e,t,a){void 0===a&&(a=300);let{scrollHeight:n,style:i}=e;requestAnimationFrame(()=>{i.minHeight="initial",i.height=n+"px",i.transition=`all ${a}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,a)})})}(e,d,l):d()};m||(c?t():(f.current=1,e.className+=` ${x}`,e.addEventListener("animationend",t)))},[m]),i.createElement(i.Fragment,null,r)}}let g=new Map,x=[],f=new Set,h=()=>g.size>0;function b(e,t){g.forEach(a=>{null!=t&&null!=t&&t.containerId?(null==t?void 0:t.containerId)===a.id&&a.toggle(e,null==t?void 0:t.id):a.toggle(e,null==t?void 0:t.id)})}let v=1,y=()=>""+v++;function j(e,t){return m(e)&&(h()||x.push({content:e,options:t}),g.forEach(a=>{a.buildToast(e,t)})),t.toastId}function N(e,t){return{...t,type:t&&t.type||e,toastId:t&&(d(t.toastId)||c(t.toastId))?t.toastId:y()}}function _(e){return(t,a)=>j(t,N(e,a))}function w(e,t){return j(e,N("default",t))}w.loading=(e,t)=>j(e,N("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),w.promise=function(e,t,a){let n,{pending:i,error:s,success:l}=t;i&&(n=d(i)?w.loading(i,a):w.loading(i.render,{...a,...i}));let r={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},o=(e,t,i)=>{if(null==t)return void w.dismiss(n);let s={type:e,...r,...a,data:i},l=d(t)?{render:t}:t;return n?w.update(n,{...s,...l}):w(l.render,{...s,...l}),i},c=u(e)?e():e;return c.then(e=>o("success",l,e)).catch(e=>o("error",s,e)),c},w.success=_("success"),w.info=_("info"),w.error=_("error"),w.warning=_("warning"),w.warn=w.warning,w.dark=(e,t)=>j(e,N("default",{theme:"dark",...t})),w.dismiss=function(e){!function(e){var t;if(h()){if(null==e||d(t=e)||c(t))g.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=g.get(e.containerId);t?t.removeToast(e.id):g.forEach(t=>{t.removeToast(e.id)})}}else x=x.filter(t=>null!=e&&t.options.toastId!==e)}(e)},w.clearWaitingQueue=function(e){void 0===e&&(e={}),g.forEach(t=>{!t.props.limit||e.containerId&&t.id!==e.containerId||t.clearQueue()})},w.isActive=function(e,t){var a;if(t)return!(null==(a=g.get(t))||!a.isToastActive(e));let n=!1;return g.forEach(t=>{t.isToastActive(e)&&(n=!0)}),n},w.update=function(e,t){void 0===t&&(t={});let a=((e,t)=>{var a;let{containerId:n}=t;return null==(a=g.get(n||1))?void 0:a.toasts.get(e)})(e,t);if(a){let{props:n,content:i}=a,s={delay:100,...n,...t,toastId:t.toastId||e,updateId:y()};s.toastId!==e&&(s.staleId=e);let l=s.render||i;delete s.render,j(l,s)}},w.done=e=>{w.update(e,{progress:1})},w.onChange=function(e){return f.add(e),()=>{f.delete(e)}},w.play=e=>b(!0,e),w.pause=e=>b(!1,e),"undefined"!=typeof window?i.useLayoutEffect:i.useEffect;let E=function(e,t){return void 0===t&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}};p(E("bounce",!0)),p(E("slide",!0)),p(E("zoom")),p(E("flip")),a(88062);var k=a(53524),T=a(17839),I=a(63777),C=a(86646);a(53386);var S=a(98387),L=e=>{let{competitionTypes:t,selectedType:a,onChange:i,isDisabled:s=!1}=e;return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("label",{className:"block text-lg font-semibold",children:["Type de comp\xe9tition ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-8",children:Object.entries(t).map(e=>{let[t,l]=e;return(0,n.jsxs)("button",{type:"button",onClick:()=>!s&&i(l.title),disabled:s,className:"relative h-28 rounded-lg angular-cut overflow-hidden transition-all duration-300 \n              ".concat(a===l.title?"scale-[1.02]":"hover:scale-[1.01]","\n              ").concat(s?"opacity-50 cursor-not-allowed":""),children:[(0,n.jsxs)("div",{className:"absolute inset-0",children:[(0,n.jsx)("img",{src:l.image,alt:l.title,className:"w-full h-full object-cover"}),(0,n.jsx)("div",{className:"absolute inset-0 ".concat(a===l.title?"bg-gradient-to-b from-black/40 to-blue-900/40":"bg-gradient-to-b from-black/60 to-gray-900/60")})]}),(0,n.jsx)("div",{className:"absolute bottom-0 left-0 p-4 bg-gradient-to-t from-black/80 to-transparent",children:(0,n.jsx)("h3",{className:"text-xl font-bold text-white",children:l.title})}),a===l.title&&(0,n.jsx)("div",{className:"absolute top-4 right-4 w-8 h-8 bg-primary rounded-full flex items-center justify-center",children:(0,n.jsx)(o.Z,{className:"w-5 h-5 text-white"})})]},t)})})]})},q=a(54590);let O=e=>{let{value:t,onChange:a,disabled:i}=e,s=[{id:"participant",icon:l.Z,label:"Participant Individuel"},{id:"team",icon:r.Z,label:"\xc9quipe"}];return(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Type de Participation"}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-4",children:s.map(e=>{let{id:s,icon:l,label:r}=e;return(0,n.jsxs)("button",{type:"button",disabled:i,onClick:()=>a({target:{name:"participation_type",value:s}}),className:"\n              relative flex items-center angular-cut p-3 rounded-lg bg-gray-800 transition-all duration-200\n              ".concat(t===s?" bg-primary/10 text-primary":"  text-gray-300","\n              ").concat(i?"opacity-50 cursor-not-allowed":"","\n            "),children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(l,{className:"w-5 h-5 ".concat(t===s?"text-primary":"text-gray-400")}),(0,n.jsx)("span",{className:"font-medium",children:r})]}),t===s&&(0,n.jsx)("div",{className:"absolute top-2 right-2",children:(0,n.jsx)(o.Z,{className:"w-4 h-4 text-primary"})})]},s)})})]})};var R=()=>{let e=(0,s.useRouter)(),{id:t}=(0,s.useParams)(),{showToast:a}=(0,C.pm)(),[l,r]=(0,i.useState)(!1),[o,c]=(0,i.useState)({id:t,nom_des_qualifications:"",competition_type:"",participation_type:"participant",nombre_maximum:"",start_date:"",end_date:"",status:"",description_des_qualifications:"",rules:"",prize_pool:"",format_des_qualifications:"",type_de_match:"",type_de_jeu:"",image:""});(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("http://localhost","/api/get_tournament.php?id=").concat(t));if(!e.ok)throw Error("Failed to fetch tournament data");let a=await e.json();if(a.success){console.log(a);let e={...a.data,start_date:d(a.data.start_date),end_date:d(a.data.end_date)};c(e)}else throw Error(a.message)}catch(e){console.error("Error fetching tournament data:",e),a("Failed to load tournament data. Please try again.","error",1500)}})()},[t]);let d=e=>new Date(e).toISOString().split("T")[0],u=e=>{let{name:t,value:n,type:i,files:s}=e.target;if("file"===i){let e=s[0];if(e){if(e.size>5242880){a("L'image ne doit pas d\xe9passer 5MB","error",5e3);return}if(!["image/jpeg","image/png","image/gif"].includes(e.type)){a("Format d'image non support\xe9. Utilisez JPG, PNG ou GIF","error",5e3);return}c(a=>({...a,[t]:e}))}}else c(e=>({...e,[t]:n}))},m=async t=>{t.preventDefault();try{r(!0),console.log("Sending data:",o);let t=await fetch("".concat("http://localhost","/api/edit_tournament.php"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({...o,start_date:o.start_date?new Date(o.start_date).toISOString().split("T")[0]:null,end_date:o.end_date?new Date(o.end_date).toISOString().split("T")[0]:null})}),n=await t.json();console.log("Response:",n),n.success?(a(n.message,"success",3e3),setTimeout(()=>{e.push("/dashboards/tournaments")},1500)):a(n.message||"Error updating tournament","error",3e3)}catch(e){console.error("Error:",e),a("An error occurred while updating the tournament","error",3e3)}finally{r(!1)}};return l?(0,n.jsx)(S.Z,{text:"Submiting Changes..."}):(0,n.jsx)("div",{className:"text-gray-300 min-h-screen p-4",children:(0,n.jsxs)("div",{className:"mx-auto",children:[(0,n.jsx)("h1",{className:"text-5xl font-custom mb-2",children:"MODIFIER LE TOURNOI"}),(0,n.jsx)("p",{className:"text-gray-500 mb-8",children:"Modifiez les d\xe9tails du tournoi."}),(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsx)(L,{competitionTypes:q.n,selectedType:o.competition_type}),(0,n.jsxs)("form",{onSubmit:m,className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Nom des Qualifications ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsx)("input",{type:"text",name:"nom_des_qualifications",value:o.nom_des_qualifications,onChange:u,className:"w-full bg-gray-800 p-3 rounded-lg angular-cut",required:!0})]}),(0,n.jsx)(O,{value:o.participation_type,onChange:u,disabled:!1})]}),(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Date de D\xe9but"}),(0,n.jsx)("input",{type:"date",name:"start_date",value:o.start_date,onChange:u,className:"w-full bg-gray-800 p-3 rounded-lg angular-cut",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Date de Fin"}),(0,n.jsx)("input",{type:"date",name:"end_date",value:o.end_date,onChange:u,className:"w-full bg-gray-800 p-3 rounded-lg angular-cut",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Statut"}),(0,n.jsx)("select",{name:"status",value:o.status,onChange:u,className:"w-full bg-gray-800 p-3 rounded-lg angular-cut",children:["Ouvert aux inscriptions","En cours","Termin\xe9","Annul\xe9"].map(e=>(0,n.jsx)("option",{value:e,children:e},e))})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:["team"===o.participation_type?(0,n.jsx)(I.Z,{value:o.nombre_maximum,onChange:u}):(0,n.jsx)(T.Z,{value:o.nombre_maximum,onChange:u}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Format des Qualifications"}),(0,n.jsxs)("select",{name:"format_des_qualifications",value:o.format_des_qualifications,onChange:u,className:"w-full bg-gray-800 p-3 rounded-lg angular-cut",children:[(0,n.jsx)("option",{children:"Single Elimination"}),(0,n.jsx)("option",{children:"Double Elimination"}),(0,n.jsx)("option",{children:"Round Robin"})]})]}),(0,n.jsx)(k.Z,{value:o.prize_pool,onChange:u})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Description des Qualifications"}),(0,n.jsx)("textarea",{name:"description_des_qualifications",value:o.description_des_qualifications,onChange:u,className:"w-full bg-gray-800 p-3 rounded-lg angular-cut",rows:"4"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"R\xe8gles du Tournoi"}),(0,n.jsx)("textarea",{name:"rules",value:o.rules,onChange:u,className:"w-full bg-gray-800 p-3 rounded-lg angular-cut",rows:"4"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Type de Match"}),(0,n.jsx)("input",{type:"text",name:"type_de_match",value:o.type_de_match,onChange:u,className:"w-full bg-gray-800 p-3 rounded-lg angular-cut"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Type de Jeu"}),(0,n.jsx)("input",{type:"text",name:"type_de_jeu",value:o.type_de_jeu,onChange:u,className:"w-full bg-gray-800 p-3 rounded-lg angular-cut"})]})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,n.jsx)("button",{type:"button",onClick:()=>e.back(),className:"px-6 py-3 bg-gray-600 text-white angular-cut",children:"ANNULER"}),(0,n.jsx)("button",{type:"submit",className:"px-6 py-3 bg-primary text-white angular-cut",children:"METTRE \xc0 JOUR"})]})]})]})]})})}},53386:function(e,t,a){"use strict";var n=a(57437),i=a(2265);t.Z=e=>{let{messages:t=[]}=e,[a,s]=(0,i.useState)(0);return(0,i.useEffect)(()=>{let e=setInterval(()=>{s(e=>(e+1)%t.length)},2e3);return()=>clearInterval(e)},[]),(0,n.jsx)("div",{className:"fixed inset-0 flex items-center justify-center  backdrop-blur-sm z-50",children:(0,n.jsxs)("div",{className:"text-center  p-8 rounded-xl",children:[(0,n.jsx)("div",{className:"inline-block",children:(0,n.jsx)("div",{className:"w-16 h-16 border-4 border-t-blue-500 border-r-transparent border-b-blue-500 border-l-transparent rounded-full animate-spin"})}),(0,n.jsx)("p",{className:"mt-4 text-white text-2xl animate-pulse",children:t[a]})]})})}},98387:function(e,t,a){"use strict";var n=a(57437);a(2265);var i=a(65251);t.Z=e=>{let{text:t}=e,a={initial:{opacity:0},animate:{opacity:1}};return(0,n.jsxs)(i.E.div,{className:"fixed inset-0 flex flex-col items-center justify-center z-50",initial:"initial",animate:"animate",exit:"exit",variants:{initial:{opacity:0},animate:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.3}}},children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-black/60 to-black/70 backdrop-blur-md"}),(0,n.jsxs)("div",{className:"relative z-10 flex flex-col items-center",children:[(0,n.jsxs)("div",{className:"relative flex items-center justify-center w-36 h-36",children:[(0,n.jsx)(i.E.div,{className:"absolute w-56 h-56 border-9 border-white/20 rounded-full",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5}}),(0,n.jsx)(i.E.div,{className:"absolute w-56 h-56 border-t-9 border-l-8 border-primary rounded-full",variants:{animate:{rotate:360,transition:{repeat:1/0,duration:1.5,ease:"linear"}}},animate:"animate"}),(0,n.jsx)("img",{src:"https://moroccogamingexpo.ma/wp-content/uploads/2024/02/Logo-MGE-2025-white.svg",className:"w-64 h-64 z-10",alt:"Morocco Gaming Expo 2025"})]}),t&&(0,n.jsxs)(i.E.div,{className:"mt-16 flex items-center",variants:{initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{delay:.3,duration:.5}},exit:{opacity:0,y:-20}},children:[(0,n.jsx)("p",{className:"text-4xl font-custom text-white tracking-wider",children:t}),(0,n.jsx)(i.E.div,{className:"flex ml-2",variants:{animate:{transition:{staggerChildren:.3}}},children:[0,1,2].map(e=>(0,n.jsx)(i.E.span,{className:"text-4xl text-white w-3 mx-1",variants:a,initial:"initial",animate:{opacity:[0,1,0],y:[0,-10,0],transition:{repeat:1/0,duration:1.5,delay:.2*e}},children:"."},e))})]})]})]})}},88062:function(){}},function(e){e.O(0,[9102,3083,9508,2971,4938,1744],function(){return e(e.s=18486)}),_N_E=e.O()}]);