(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[118],{37055:function(e,t,a){Promise.resolve().then(a.bind(a,97482))},24930:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let i=a(21024);a(2265);let l=i._(a(84795));function n(e){return{default:(null==e?void 0:e.default)||e}}function s(e,t){let a=l.default,i={loading:e=>{let{error:t,isLoading:a,pastDelay:i}=e;return null}};"function"==typeof e&&(i.loader=e),Object.assign(i,t);let s=i.loader;return a({...i,loader:()=>null!=s?s().then(n):Promise.resolve(n(()=>null))})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},16005:function(e,t,a){"use strict";function i(e){let{children:t}=e;return t}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NoSSR",{enumerable:!0,get:function(){return i}}),a(46491)},84795:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let i=a(21024)._(a(2265)),l=a(16005),n=function(e){let t=Object.assign({loader:null,loading:null,ssr:!0},e);function a(e){let a=t.loading,n=i.default.createElement(a,{isLoading:!0,pastDelay:!0,error:null}),s=t.ssr?i.default.Fragment:l.NoSSR,r=t.lazy;return i.default.createElement(i.default.Suspense,{fallback:n},i.default.createElement(s,null,i.default.createElement(r,e)))}return t.lazy=i.default.lazy(t.loader),a.displayName="LoadableComponent",a}},97482:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var i=a(57437);a(24930);var l=a(2265),n=a(67972),s=a(25750),r=a(62442),o=a(24033),c=a(53524),d=a(17839),u=a(63777),m=a(86646),p=a(65251),g=e=>{let{text:t}=e,a={initial:{opacity:0},animate:{opacity:1}};return(0,i.jsxs)(p.E.div,{className:"fixed inset-0 flex flex-col items-center justify-center z-50",initial:"initial",animate:"animate",exit:"exit",variants:{initial:{opacity:0},animate:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.3}}},children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-black/60 to-black/70 backdrop-blur-md"}),(0,i.jsxs)("div",{className:"relative z-10 flex flex-col items-center",children:[(0,i.jsxs)("div",{className:"relative flex items-center justify-center w-36 h-36",children:[(0,i.jsx)(p.E.div,{className:"absolute w-56 h-56 border-9 border-white/20 rounded-full",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5}}),(0,i.jsx)(p.E.div,{className:"absolute w-56 h-56 border-t-9 border-l-8 border-primary rounded-full",variants:{animate:{rotate:360,transition:{repeat:1/0,duration:1.5,ease:"linear"}}},animate:"animate"}),(0,i.jsx)("img",{src:"https://moroccogamingexpo.ma/wp-content/uploads/2024/02/Logo-MGE-2025-white.svg",className:"w-64 h-64 z-10",alt:"Morocco Gaming Expo 2025"})]}),t&&(0,i.jsxs)(p.E.div,{className:"mt-16 flex items-center",variants:{initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{delay:.3,duration:.5}},exit:{opacity:0,y:-20}},children:[(0,i.jsx)("p",{className:"text-4xl font-custom text-white tracking-wider",children:t}),(0,i.jsx)(p.E.div,{className:"flex ml-2",variants:{animate:{transition:{staggerChildren:.3}}},children:[0,1,2].map(e=>(0,i.jsx)(p.E.span,{className:"text-4xl text-white w-3 mx-1",variants:a,initial:"initial",animate:{opacity:[0,1,0],y:[0,-10,0],transition:{repeat:1/0,duration:1.5,delay:.2*e}},children:"."},e))})]})]})]})},x=e=>{let{competitionTypes:t,selectedType:a,onChange:l}=e;return console.log("CompetitionTypeSelector - selectedType:",a),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("label",{className:"block text-lg font-semibold",children:["Type de comp\xe9tition ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-8",children:Object.entries(t).map(e=>{let[t,n]=e;return(0,i.jsxs)("button",{type:"button",onClick:()=>{let e={target:{name:"competition_type",value:n.title,type:"text"}};console.log("Competition type selected:",n.title),console.log("Event being passed to onChange:",e),l(e)},className:"relative h-28 rounded-lg angular-cut overflow-hidden transition-all duration-300 \n              ".concat(a===n.title?"scale-[1.02]":"hover:scale-[1.01]"),children:[(0,i.jsxs)("div",{className:"absolute inset-0",children:[(0,i.jsx)("img",{src:n.image,alt:n.title,className:"w-full h-full object-cover"}),(0,i.jsx)("div",{className:"absolute inset-0 ".concat(a===n.title?"bg-gradient-to-b from-black/40 to-blue-900/40":"bg-gradient-to-b from-black/60 to-gray-900/60")})]}),(0,i.jsx)("div",{className:"absolute bottom-0 left-0 p-4 bg-gradient-to-t from-black/80 to-transparent",children:(0,i.jsx)("h3",{className:"text-xl font-bold text-white",children:n.title})}),a===n.title&&(0,i.jsx)("div",{className:"absolute top-4 right-4 w-8 h-8 bg-primary rounded-full flex items-center justify-center",children:(0,i.jsx)(r.Z,{className:"w-5 h-5 text-white"})})]},t)})}),(0,i.jsx)("input",{type:"hidden",name:"competition_type",value:a||""})]})},f=a(54590);let h=e=>{let{value:t,onChange:a}=e,l=[{id:"participant",icon:n.Z,label:"Participant Individuel"},{id:"team",icon:s.Z,label:"\xc9quipe"}];return(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Type de Participation"}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-4",children:l.map(e=>{let{id:l,icon:n,label:s}=e;return(0,i.jsxs)("button",{type:"button",onClick:()=>a({target:{name:"participation_type",value:l}}),className:"\n              relative flex items-center  angular-cut p-3 rounded-lg bg-gray-800 transition-all duration-200\n              ".concat(t===l?" bg-primary/10 text-primary":"  text-gray-300","\n            "),children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(n,{className:"w-5 h-5 ".concat(t===l?"text-primary":"text-gray-400")}),(0,i.jsx)("span",{className:"font-medium",children:s})]}),t===l&&(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)(r.Z,{className:"w-4 h-4 text-primary"})})]},l)})})]})};var b=()=>{(0,o.useRouter)();let{showToast:e}=(0,m.pm)(),[t,a]=(0,l.useState)(!1),[n,s]=(0,l.useState)({nom_des_qualifications:"",competition_type:"",participation_type:"participant",start_date:"",end_date:"",status:"Ouvert aux inscriptions",description_des_qualifications:"",rules:"",nombre_maximum:"",prize_pool:"",format_des_qualifications:"Single Elimination",type_de_match:"",type_de_jeu:"",image:null}),[r,p]=(0,l.useState)(null),b=t=>{let{name:a,value:i,type:l,files:n}=t.target;if(console.log(a),"file"===l){let t=n[0];if(t){if(t.size>5242880){e.error("L'image ne doit pas d\xe9passer 5MB");return}if(!["image/jpeg","image/png","image/gif"].includes(t.type)){e.error("Format d'image non support\xe9. Utilisez JPG, PNG ou GIF");return}let i=new FileReader;i.onloadend=()=>p(i.result),i.readAsDataURL(t),s(e=>({...e,[a]:t}))}}else s(e=>({...e,[a]:i}))},j=()=>["nom_des_qualifications","start_date","end_date","image","competition_type"].filter(e=>!n[e]).length>0?(e("Veuillez remplir tous les champs obligatoires","error",1500),!1):new Date(n.start_date)>new Date(n.end_date)?(e("La date de fin doit \xeatre apr\xe8s la date de d\xe9but","error",1500),!1):"team"!==n.participation_type||!!n.nombre_maximum||(e("Veuillez sp\xe9cifier le nombre maximum d'\xe9quipes","error",1500),!1),y=async t=>{if(t.preventDefault(),!j())return;a(!0);let i=new FormData;try{Object.entries(n).forEach(e=>{let[t,a]=e;null!==a&&""!==a&&i.append(t,a)});let t=await fetch("".concat("http://localhost","/api/new_tournament.php"),{method:"POST",body:i});if(!t.ok){let e=await t.text();try{let t=JSON.parse(e);throw Error(t.message||"Erreur lors de la cr\xe9ation du tournoi")}catch(t){throw console.error("Server response:",e),Error("Erreur de serveur inattendue")}}await t.json(),e("Tournoi cr\xe9\xe9 avec succ\xe8s!","success",1500)}catch(t){console.error("Submission error:",t),e(t.message||"Une erreur est survenue","error",1500)}finally{a(!1)}};return(0,i.jsx)("div",{className:"text-gray-300 min-h-screen p-4",children:t?(0,i.jsx)(g,{text:"Generating matches..."}):(0,i.jsxs)("div",{className:"mx-auto",children:[(0,i.jsx)("h1",{className:"text-5xl  font-custom mb-2",children:"NOUVEAU TOURNOI"}),(0,i.jsx)("p",{className:"text-gray-500 mb-8",children:"Cr\xe9ez un tournoi et d\xe9finissez les pr\xe9f\xe9rences."}),(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsx)(x,{competitionTypes:f.n,selectedType:n.competition_type,onChange:b}),(0,i.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[r&&(0,i.jsx)("img",{src:r,alt:"Preview",className:"mt-2 h-32 object-cover rounded-lg angular-cut"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Image du Tournoi"}),(0,i.jsx)("input",{type:"file",name:"image",onChange:b,accept:"image/*",className:" w-full  rounded-lg  p-3 file:mr-4 file:py-2 file:px-4 \n              file:rounded-full file:border-0 file:text-sm file:bg-gray-600 bg-gray-800\n              file:text-gray-300 hover:file:bg-gray-600 cursor-pointer angular-cut"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Nom des Qualifications ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsx)("input",{type:"text",name:"nom_des_qualifications",value:n.nom_des_qualifications,onChange:b,className:"w-full bg-gray-800 p-3 rounded-lg angular-cut",required:!0})]}),(0,i.jsx)(h,{value:n.participation_type,onChange:b})]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Date de D\xe9but"}),(0,i.jsx)("input",{type:"date",name:"start_date",value:n.start_date,onChange:b,className:"w-full bg-gray-800 p-3 rounded-lg angular-cut",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Date de Fin"}),(0,i.jsx)("input",{type:"date",name:"end_date",value:n.end_date,onChange:b,className:"w-full bg-gray-800 p-3 rounded-lg angular-cut",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Statut"}),(0,i.jsx)("select",{name:"status",value:n.status,onChange:b,className:"w-full bg-gray-800 p-3 rounded-lg angular-cut",children:["Ouvert aux inscriptions","En cours","Termin\xe9","Annul\xe9"].map(e=>(0,i.jsx)("option",{value:e,children:e},e))})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:["team"===n.participation_type?(0,i.jsx)(u.Z,{value:n.nombre_maximum,onChange:b}):(0,i.jsx)(d.Z,{value:n.nombre_maximum,onChange:b}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Format des Qualifications"}),(0,i.jsxs)("select",{name:"format_des_qualifications",value:n.format_des_qualifications,onChange:b,className:"w-full bg-gray-800 p-3 rounded-lg angular-cut",children:[(0,i.jsx)("option",{className:"angular-cut",children:"Single Elimination"}),(0,i.jsx)("option",{children:"Double Elimination"}),(0,i.jsx)("option",{children:"Round Robin"})]})]}),(0,i.jsx)(c.Z,{value:n.prize_pool,onChange:b})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Description des Qualifications"}),(0,i.jsx)("textarea",{name:"description_des_qualifications",value:n.description_des_qualifications,onChange:b,className:"w-full bg-gray-800 p-3 rounded-lg angular-cut",rows:"4"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-2",children:"R\xe8gles du Tournoi"}),(0,i.jsx)("textarea",{name:"rules",value:n.rules,onChange:b,className:"w-full bg-gray-800 p-3 rounded-lg angular-cut",rows:"4"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Type de Match"}),(0,i.jsx)("input",{type:"text",name:"type_de_match",value:n.type_de_match,onChange:b,className:"w-full bg-gray-800 p-3 rounded-lg angular-cut"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-2 ",children:"Type de Jeu"}),(0,i.jsx)("input",{type:"text",name:"type_de_jeu",value:n.type_de_jeu,onChange:b,className:"w-full bg-gray-800 p-3 rounded-lg angular-cut"})]})]}),(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)("button",{type:"submit",className:"px-6 py-3 angular-cut bg-primary text-white  hover:bg-primary/90 transition-colors",children:"CR\xc9ER LE TOURNOI"})})]})]})]})})}}},function(e){e.O(0,[9102,3083,9508,2971,4938,1744],function(){return e(e.s=37055)}),_N_E=e.O()}]);